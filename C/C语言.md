# C Language



## 常量

1. 整型常量

   - 十进制整数

   - 八进制整数：以0开头。如0123、-011

   - 十六进制整数：以0x开头。如0x123

2. 实型常量

   - 十进制小数形式：406、-1.3

   - 指数形式：12.34e3（表示12.34乘以10的3次方）、-1.23E-7（表示-1.23乘以10的负7次方）
     - 字母e可以小写，也可以大写
     - 字母e前面一定要有数字
     - 字母e后面一定是一个整数

3. 字符常量

   - 普通字符：用单撇号括起来的字符。如'a'、'D'、'1'、'?'、'$'

   - 转义字符：以字符\开头的字符序列。例如'\n'。

4. 字符串常量

   - 字符串常量是一对用双引号括起来的字符序列。例如"How do you do"、"abc"、"a"。

   - "a"与'a'是不同的。

   - 字符串常量在内存中的存放。例如“CHINA”。存放形式  => `C H I N A \0`。

     字符串相对于字符，主要是后面多了`\0`。

5. 符号常量

   - 用标识符代表常量。
   - 一般用大写字母：PRICE、PI。
   - 定义格式：***`#define  符号常量  常量`***
   - 其值在作用域内不能改变和再赋值。

## 变量

定义：其值可以改变的量。

- 定义格式：***`数据类型  变量名`***。
- 变量应该有名字，并在内存中占据一定的存储单元。
- 变量名和变量值有不同的含义。
- 变量名实为一个符号地址。

## 标识符

定义：标识变量名、符号常量名、函数名、数组名、文件名的字符串序列——名字。

命名规则：

- 只能由字母、数字、下划线组成，且第一个字符必须是字母或下划线。
- 大小写字母含义不同，一般小写。
- 不能使用关键字。
- 允许最长32个字符，建议长度不超过8个字符。

使用：先定义、后使用。

------

*C语言数据类型*

- 基本类型
  - 整型
    - 短整型 short
    - 整型 int
    - 长整型 long
  - 实型（浮点类型）
    - 单精度型 float
    - 双精度型 double
  - 字符型 char
  - 枚举类型 enum
- 构造类型
  - 数组类型
  - 结构体类型
  - 共用体类型
- 指针类型
- 空类型 void

------

*常用转义字符及其含义*

| 字符形式 | 含义                    |
| -------- | ----------------------- |
| \n       | 换行                    |
| \t       | 水平制表                |
| \b       | 退格                    |
| \r       | 回车                    |
| \f       | 换页                    |
| \\\      | 字符\                   |
| \\'      | 字符'                   |
| \\"      | 字符''                  |
| \ooo     | 1~3位8进制所代表的字符  |
| \xhh     | 1~2位16进制所代表的字符 |





## 7、函数



### 7.1、函数的基本概念

### 7.2、函数的调用

#### 7.2.1、函数调用的形式

按函数调用在程序中出现的形式和位置来分，可以有以下3中函数调用方式：

1. 函数调用语句
   - 把函数调用单独作为一个语句，如printf_star();
   - 这时不要求函数带返回值，只要求函数完成一定的操作。
2. 函数表达式
   - 函数调用出现在另一个表达式中，如c=max(a,b);
   - 这时要求函数带一个确定的返回值以参加表达式的运算。
3. 函数参数
   - 函数调用作为另一个函数调用时的实参，如m=max(a,max(b,c));
   - 其中max(b,c)是一次函数调用，它的值作为max另一次调用的实参。

#### 7.2.2、函数调用时的数据传递

**形式参数和实际参数**

- 在调用有参函数时，主调函数和被调用函数之间有数据传递关系。
- **定义函数时**函数名后面的变量名称为“形式参数”（间称“形参”）。
- **主调函数中调用一个函数时**，函数名后面参数称为“实际参数”（间称“实参”）。
- 实际参数可以是常量、变量或表达式。

**实参和形参间的数据传递**

- 在调用函数过程中，系统会把实参的值传递给被调用函数的形参。
- 或者说，形参从实参得到一个值。
- 该值在函数调用期间有效，可以参加被调函数中的运算。

#### 7.2.3、函数调用的过程

- 在定义函数中指定的形参，在未出现函数调用时，它们并不占内存中的存储单元。
- 在发生函数调用时，函数max的形参被临时分配内存单元。
- 调用结束，形参单元被释放。
- 实参单元仍保留并维持原值，没有改变。
- 如果在执行一个被调用函数时，形参的值发生改变，不会改变主调函数的实参的值。

#### 7.2.4、函数的返回值

返回语句形式：

```c
return(表达式);
或
return 表达式;
```

> 加括号可以不要空格。

- 功能：使程序控制从被调用函数返回到调用函数中，同时把返回值带给调用函数。
- 通常，希望通过函数调用使主调用函数能得到一个确定的值，这就是函数值（函数的返回值）。
  - 函数的返回值是通过函数中的return语句获得的。
  - 函数值的类型。应当在定义函数时指定函数值的类型。
  - 在定义函数时指定的函数类型一般应该和return语句中的表达式类型一致。如果函数值的类型和return语句中表达式的值不一致，则以函数类型为准，

#### 7.2.5、对被调用函数的声明和函数原型

在一个函数中调用另一个函数需要具备以下条件：

1. 被调用函数必须是已经定义的函数（是库函数或用户自己定义的函数）。
2. 如果使用库函数，应该在本文件开头加相应的`#include`指令。
3. 如果使用自己定义的函数，而该函数的位置在调用它的函数后面，应该声明。

------

函数原型的一般形式有两种：

- 例1：float add(float x,float y);
- 例2：float add(float,float);

原型说明可以放在文件的开头，这时所有函数都可以使用此函数。

### 7.3、函数的嵌套调用

- C语言的函数定义是互相平行的、独立的。
- 即函数不能嵌套定义，但可以嵌套调用。
- 即调用一个函数的过程中，有可以调用另一个函数。

### 7.4、函数的递归调用

- 在调用一个函数的过程中又出现直接或间接地调用该函数本身，称为函数的递归调用。
- C语言的特点之一就在于允许函数的递归调用。

### 7.5、数组作为函数参数

1. 数组元素作为函数的实参
2. 数组名作为函数参数
   - 除了可以用数组元素作为函数参数外，还可以用数组名作函数参数（包括实参和形参）。
   - 用数组元素作实参时，向形参变量传递的是数组元素的值。
   - 用数组名作函数实参时，向形参传递的是数组首元素的地址。
3. 多为数组名作函数参数

### 7.6、局部变量和全局变量

**局部变量**

定义变量可能有三种情况：

- 在函数的开头定义。
- 在函数内的复合语句内定义。
- 在函数的外部定义。

在一个函数内部定义的变量只在**本函数范围内**有效。

在复合语句内定义的变量只在**本复合语句范围内**有效。

在函数内部或复合语句内部定义的变量称为“**局部变量**”。

全局变量

- 在函数内定义的变量是局部变量，而在函数之外定义的变量称为外部变量。
- 外部变量是全局变量（也称全程变量）。
- 全局变量可以为本文件中其他函数所共用。
- 有效范围为**从定义变量的位置开始到本源文件结束**。

### 7.7、变量的存储方式和生存期



#### 7.7.1、动态存储方式与静态存储方式

从变量的作用域的角度来观察，变量可以分为全局变量和局部变量。

从变量值存在的时间（即生存期）观察，变量的存储有两种不同的方式：**静态存储方式**和**动态存储方式**。

- 静态存储方式是指在程序运行期间由系统分配固定的存储空间的方式。
- 动态存储方式是在程序运行期间根据需要进行动态的分派存储空间的方式。

每一个变量和函数都有两个属性：数据类型和数据的存储类型。

- 数据类型，如整型、浮点型等。
- 存储类别值的是数据在内存中存储的方式（如静态存储和动态存储）。
- 存储类别包括：自动、静态、寄存器、外部。
- 根据变量的存储类别，可以知道变量的作用域和生存期。

![1623835275926](C:\Users\xlp\AppData\Roaming\Typora\typora-user-images\1623835275926.png)

![1623835224721](C:\Users\xlp\AppData\Roaming\Typora\typora-user-images\1623835224721.png)

#### 7.7.2、全局变量的存储类别

1. 自动变量（auto变量）

   - 局部变量，如果不专门声明存储类别，都是动态地分配存储空间。

   - 调用函数时，系统会给局部变量分配存储空间，调用结束时就自动释放空间。因此这类局部变量称为自动变量。

   - 自动变量用关键字auto作存储类别的声明。

     ```c
     int f(int a) {
         auto int b,c = 3;
         return 0;
     }
     ```

2. 静态局部变量（static局部变量）

   - 希望函数中局部变量在函数调用结束后不消失而继续保留原值，即其占用的存储单元不释放，在下一次再调用该函数时，该变量已有值（就是上一次函数调用结束时的值），这时就应该指定该局部变量为“静态局部变量”，用关键字static进行声明。

   若非必要，不要多用静态局部变量。

3. 寄存器变量（register变量）

   - 一般情况下，变量（包括静态存储方式和动态存储方式）的值是存放在内存中的。
   - 寄存器变量允许将局部变量的值放在CPU中的寄存器中。
   - 现在的计算机能够识别使用频繁的变量，从而自动地将这些变量放在寄存器中，而不需要程序设计者指定。

#### 7.7.3、全局变量的存储类别

全局变量都是存放在静态存储区中的，因此它们的生存期是固定的，存在于程序的整个运行过程。

一般来说，外部变量是在函数的外部定义的全局变量，它的作用域是从变量的定义处开始，到本程序文件的末尾。在此作用域内，全局变量可以为程序中的各个函数所引用。

在一个文件内部扩展外部变量的作用域

- 外部变量有效的作用域范围只限于定义处到本文件结束。
- 如果用关键字extern对某变量作“外部变量声明”，则可以从“声明”处起，合法地使用该外部变量。

将外部变量的作用域扩展到其他文件

- 如果一个程序包含两个文件，在两个文件中都要用到同一个外部变量Num，不能分别在两个文件中各自定义一个外部变量Num。
- 应在任一个文件中定义外部变量Num，而在另一文件中用extern对Num作“外部变量声明”。
- 在编译和连接时，系统会由此知道Num有“外部链接”，可以从别处找到已定义的外部变量Num，并将在另一文件中定义外部变量Num的作用域**扩展**到本文件。

将外部变量的作用域限制在本文件中

有时在程序设计中希望某些外部变量只限于被本文件引用。这时可以在定义外部变量时加一个static声明。

说明：

3. 不要误认为外部变量加static声明后才采取静态存储方式，而不加static的是采取动态存储。
2. 声明局部变量的存储类型和声明全局变量的存储类型的含义是不同的。
3. 对于局部变量来说，声明存储类型的作用是指定变量存储的区域以及由此产生的生存期的问题。而对于全局变量来说，声明存储类型的作用域的扩展问题。

用static声明一个变量的作用是：

- 对局部变量用static声明，把它分配在静态存储区。

  该变量在整个程序执行期间不释放，其所分配的空间始终存在。

- 对全局变量用static声明，则该变量的作用域只限于本文件模块（即被声明的文件中）。

> 注意：
>
> - 用auto、register、static声明变量时，是在定义变量的基础上加上这些关键字，而不能单独使用。
>
> - 下面的用法不对：
>
>   ```c
>   int a;
>   static a;
>   ```
>
>   编译时会被认为“重新定义”。

### 7.8、内部函数和外部函数

#### 7.8.1、内部函数

如果一个函数只能被本文件中其他函数所调用，它称为内部函数。

在定义内部函数时，在函数名和函数类型的签名加static，即：

```c
static 类型名 函数名(形参表)
```

内部函数又称静态函数，因为它是用static声明的。

通常把只能由被本文件使用的函数和外部变量放在文件的开头，前面都冠以static使之局部化，其他文件不能引用。

提高了程序的可靠性。

#### 7.8.2、外部函数

如果在定义函数时，在函数首部的最左端加关键字extern，则此函数是外部函数，可供其他文件调用。

如函数首部可以为：

```c
extern int fun(int a,int b)
```

如果在定义函数时省略extern，则默认为外部函数。

>**文件包含方法**
>
>**在主函数的头部将本程序各文件用**`#include "filename.c"`。





## 8、指针







## 9、结构体



## 结构体类型



**建立自己的结构体类型**

- 由用户自己建立由不同类型数据组成的组合型的数据结构，称为结构体（structure）。

- 声明一个结构体类型一般形式为：

  ```c
  struct 结构体名 {
      //成员表列 => 类型名 成员名;
  };
  ```

    *示例：*

    ```c
  struct Student {
        int num;
        char name[20];
        char sex;
        int age;
        float score;
        char addr[30];
    };
    ```



**说明**

1. 结构体类型并非只有一种，而是可以设计出许多种结构体类型，例如`struct Teacher`、`struct Worker`、`struct Date`。

   各自包含不同的成员。

2. 成员可以属于另一个结构体类型。

   ```c
   struct Date {
       int year;
       int month;
       int day;
   };
   struct Stu {
       int num;
       char name[20];
       char sex;
       int age;
       struct Date birthday;
       char addr[30];
   };
   ```


## 结构体变量

**定义结构体类型变量**

1. 结构体类型`struct Student`，可以用来定义变量

   ```c
   struct Student student1,student2;
   ```

2. 在声明类型的同时定义变量

   ```c
   struct Student {
       int num;
       char name[20];
       char sex;
       int age;
       float score;
       char addr[30];
   }student1,student2;
   ```

3. 不指定结构体类型名而直接定义结构体类型变量

   ```c
   struct {
       //成员表列
   }变量名列表;
   ```

   



- 结构体类型与结构体变量是不同的概念，不要混同。
  - 只能对变量赋值，存取或运算，而不能对一个类型赋值、存取或运算。
  - 在编译时，对类型是不分配空间的，只对变量分配空间。
- 结构体类型中的成员名可以与程序中的变量相同，但二者不代表同一对象。
- 对结构体变量中的成员，可以单独使用，它的作用与低位相当于普通变量。



结构体变量的初始化和引用

- 定义结构体变量的同时，可对它进行初始化，即赋初值。

- 形式一：

  ```c
  struct 结构体名 {
      类型标识符 成员们1;
      类型标识符 成员们2;
      ......
  };
  struct 结构体名 结构体变量={初始数据};
  ```

  示例：

  ```c
  struct Student {
      int num;
      char name[20];
      int age;
      char addr[30];
  };
  struct Student stu = {111,"Wing Lin",19,"200 Beijing Road"};
  ```

- 形式二

  ```c
  struct 结构体名 {
      类型标识符 成员们1;
      类型标识符 成员们2;
      ......
  } 结构体变量={初始数据};
  ```

  示例：

  ```c
  struct Student {
      int num;
      char name[20];
      int age;
      char addr[30];
  } stu = {111,"Wing Lin",19,"200 Beijing Road"};
  ```

- 形式三

  ```c
  struct {
      类型标识符 成员们1;
      类型标识符 成员们2;
      ......
  } 结构体变量={初始数据};
  ```

  示例：

  ```c
  struct {
      int num;
      char name[20];
      int age;
      char addr[30];
  } stu = {111,"Wing Lin",19,"200 Beijing Road"};
  ```





## 结构体数组



- 具有相同结构的结构体也可以组成数组。

- 定义结构体数组 - 3种形式：

  1. 形式一：间接定义

     ```c
     struct Student {
         int num;
         char name[20];
         int age;
         char addr[30];
     };
     struct Student stu[2];
     ```

  2. 形式二：

     ```c
     struct Student {
         int num;
         char name[20];
         int age;
         char addr[30];
     } stu[2];
     ```

  3. 形式三：

     ```c
     struct {
         int num;
         char name[20];
         int age;
         char addr[30];
     } stu[2];
     ```

说明

- 对结构体数组初始化的形式是在定义数组的后面加上：={初值表列}；

  示例：

  ```c
  struct Student stu[2] = {
          111, "Wing Lin", 19, "200 Beijing Road",
          111, "Wing Lin", 19, "200 Beijing Road"
  };
  ```

  









