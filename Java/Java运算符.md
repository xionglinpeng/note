# Java运算符

## 运算符结合性

运算符的结合性是指先计算运算符那一边的表达式，例如java代码`var a = a+b`会先计算`a+b`的值，让后在执行`=`赋值运算符，即`=`赋值运算符具有右结合性，称为从右向左结合；又例如java代码`expr1 && expr2`，会先计算`&&`运算符左边的`expr1`，然后再计算右边的`expr2`，即`&&`运算符具有左结合性，称为从左向右结合。

## 运算符优先级

一般而言：

- 单目运算符优先级较高，赋值运算符优先级较低；
- 算术运算符优先级较高，关系和逻辑运算符优先级较低；
- 多数运算符具有左结合性，单目运算符、三目运算符、赋值运算符具有右结合性；

java语言中运算符的优先级分为14级，其中1级最高，14级最低。在同一个表达式中运算符优先级高的先执行。

*运算符优先级：*

| 优先级 | 运算符                                             | 结合性     |
| ------ | -------------------------------------------------- | ---------- |
| 1      | ()、[]、{}                                         | 从左向右   |
| 2      | !、+、-、~、++、--                                 | *从右向左* |
| 3      | *、/、%                                            | 从左向右   |
| 4      | +、-                                               | 从左向右   |
| 5      | <<、>>、>>>                                        | 从左向右   |
| 6      | <、<=、>、>=、`instanceof`                         | 从左向右   |
| 7      | ==、!=                                             | 从左向右   |
| 8      | &                                                  | 从左向右   |
| 9      | ^                                                  | 从左向右   |
| 10     | \|                                                 | 从左向右   |
| 11     | &&                                                 | 从左向右   |
| 12     | \|\|                                               | 从左向右   |
| 13     | ?:（三目运算符）                                   | *从右向左* |
| 14     | =、+=、-=、*=、/=、&=、\|=、^=、~=、<<=、>>=、>>>= | *从右向左* |

> Note
>
> 上述只有优先级2、13/14是从右向左，其他都是从左向右。

**使用优先级为1的小括号可以改变其他运算符的优先级**，例如：

```java
(x-y)*z/5
```

## 运算符使用规范

源代码就是一份文档、源代码的可读性比代码运行效率更重要，因此需要注意两点：

- 不要把一个表达式写的过于复杂，如果一个表达式过于复杂，则把它分成几步来完成。
- 不要过多地依赖运算符的优先级来控制表达式的执行顺序，这样可读性太差。尽量使用小括号`()`来控制表达式的执行顺序。

反例：

```java
int a = 5;
int b = 4;
int c = a++- --b*++a/b-- >>2%a--;
```

上述代码不具有可读性，一般只会出现在面试题中，这样的情况即使是多年的老程序员也不定能hold住。



