# java数据类型：byte

byte数据类型为1个字节，8个比特位，最高位为符号位。在Java中，表示的数据范围为[-128~127]。

## byte与ASCII

标准ASCII码也叫基础ASCII码，使用7位二进制数来表示所有的大小字母、写小写字母、数字0-9、标点符号以及美式英语中使用的特殊控制字符。

ASCII码的表示范围是0~127，刚好byte类型可以覆盖，因此byte类型和ASCII码可以互相转换。

当byte类型的变量值使用单引号（''）时，该变量值表示的就是ASCII码，例如：

```java
byte a = 'a';   
byte b = 'B';
byte c = '1'; //'1'不是1
```

## byte & 0xFF

在Java中，byte是有符号数，但在有些情况下需要将其转换为无符号数，例如读取Class文件，如果常量池中常量的数量大于127个，那个读取出来的常量数量为负数（这样的情况当然是不可能的），此时需要将其转换成无符号数，其对应的无符号数就是实际常量池中常量的数量。

计算机底层存储的二进制数据是以补码的形式存储，而补码就是无符号数，因此只要通过位运算获取其补码即可。

例如`byte a = -5`，对应的二进制为10000101，补码为11111011，

byte转换为int，byte是8位，int是32位，因此当byte类型转换为int时，会自动使用符号补足高位：

```
(byte)-5 : 00000000,00000000,00000000,11111011
# 转换成int之后所有高位都补为1
(int) -5 : 11111111,11111111,11111111,11111011
```

要获取补码，只需要将高24位变为0，保留低8位，可以通过`byte & 0xFF`计算：

```
(int)-5 : 11111111,11111111,11111111,11111011
0xFF    : 00000000,00000000,00000000,11111111
```

进行&运算，结果就是

```
00000000,00000000,00000000,11111011
```

为什么要转换为int类型？

虽然在计算机中数据是以补码的形式存储，但是在java中所有数据都是有符号的，因此当值大于127，小于256时，是不能用byte类型表示的（如果支持无符号，就可以表示），因此，需要转换成一个可以表示此数据的类型，例如short，int，long都可以，只是Java语言默认情况下都是转换成int类型。

```java
short h = 0xff;
byte b = -5;
int m = b & h;
short n = (short) (b & h);
```

如上代码所示，h声明为short类型，当b与h进行&运算的时候，其结果默认为int类型。让其为short类型还需要强转。

## int转byte

int转换为byte，int是32位，byte是8位，因此当int类型转换为byte时，高24位直接丢弃。

```java
int i = 234;
System.out.println((byte)i); //-22
```

**分析**

int类型数234的二进制：00000000,00000000,00000000,11101010。

丢弃高24位，变为byte类型，二进制位：11101010。

```
(int)234 : 00000000,00000000,00000000,11101010
(byte)   :                            11101010
```

11101010是补码，转换为原码为10010110。

```
补码：11101010
反码：11101001
原码：10010110
```

此时最高位变为符号位，绝对值数为10110（22）。

加上符号即为-22。



