# 文件和目录管理



## cp命令

cp命令用来将一个或多个源文件或者目录复制到指定的目的文件和目录。它可以将单个源文件复制成一个指定文件名的具体文件或一个已经存在的目录下。cp命令还支持同时复制多个文件，当一次复制多个文件时，目标文件参数必须是一个已经存在的目录，否将出现错误。

**语法**

```shell
Usage: cp [OPTION]... [-T] SOURCE DEST
  or:  cp [OPTION]... SOURCE... DIRECTORY
  or:  cp [OPTION]... -t DIRECTORY SOURCE...
```

**选项**

- -a：此参数的相当于同时指定`-d`，`-p`，`-r`。

- -d：当复制符号连接时，把目标文件或目录也建立为符号连接，并指向与源文件或目录连接的原始文件或目录。

- -i：覆盖即有文件之前先询问用户。
- -f：强行复制文件或目录，不论目标文件或目录是否存在。
- -l：对源文件建立硬连接，而非复制文件。
- -s：对源文件建立符号连接，而非复制文件。

- -R/r：递归处理，将指定目录下的所有文件与子目录一并处理。

- -p：保留源文件和目录的属性（包括所有者，所属组，权限和时间）。
- -u：使用这项参数后只会在源文件的更改时间较目标文件更新时或是名称相互对应的目标文件并不存在时，才复制文件；
- -S：在备份文件时，用指定的后缀最“subfix”代替文件的默认后缀。
- -b：覆盖已存在的文件目标前将目标文件备份。
- -v：详细显示命令执行的操作。

**参数**

- 源文件：指定源文件列表。默认情况下，cp命令不能复制目录，如果要复制目录，则必须使用`-R/r`选项。
- 目标文件：指定目标文件。当“源文件”为多个文件时，要求“目标文件”为指定目录。

**其他特性**

1. 所有目标文件指定的目录必须是已经存在的，cp命令不能创建目录。如果没有文件复制的权限，则系统会显示出错信息。

2. “源文件”可以通过通配符“`*`”来匹配文件，例如：

   ```shell
   $ cp mysql/*.cnf* mysql-1/
   ```

3. 在Linux下使用cp命令复制文件时候，有时候会需要覆盖一些同名文件，覆盖文件的时候都会有提示：需要不停的按Y来确定执行覆盖。文件数量不多还好，但是要是几百个估计按Y都要吐血了，于是折腾来半天总结了一个方法：

   通过在cp命令前加斜杠“`\`”，示例：

   ```shell
   $ cp -r mysql/ mysql-1
   cp: overwrite ‘mysql-1/mysql/my.cnf’? r
   cp: overwrite ‘mysql-1/mysql/my.cnf.fallback’? r
   cp: overwrite ‘mysql-1/mysql/conf.d/docker.cnf’? r
   cp: overwrite ‘mysql-1/mysql/conf.d/mysql.cnf’? r
   
   $ \cp -r mysql/ mysql-1
   ```

   