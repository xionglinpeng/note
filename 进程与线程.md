# 进程与线程

## 1、线程的基本概念

线程是进程中执行运算的最小单位，是进程中的一个实体，是被系统独立调度和分派的基本单位，线程自己不拥有系统资源，只拥有一点在运行期间必不可少的资源。但它可以与同属一个进程的其他线程共享所拥有的全部资源。一个线程可以创建和撤销另一个线程，同一进程中的多个线程之间可以并发执行。

优点：

1. 易于调度。
2. 提高并发性。
3. 开销少。
4. 利于充分发挥多处理器的功能。

## 2、进程与线程

- 进程：**进程是资源分配的最小单位。**每个进程都拥有独立的代码和数据空间（进程上下文），进程间的切换会有较大的开销，一个进程包含1~n个线程。
- 线程：**线程是CPU的最小调度单位。**同属于一个进程的不同线程共享代码和数据空间，每个线程都用独立的运行栈和程序计数器，线程切换开销小。

多进程与多线程

- 多进程：指操作系统能同时运行多个任务（程序）。
- 多线程：指在同一程序中有多个任务在执行。

## 3、进程与线程的区别

1. 调度：线程是作为调度和分配的基本单位；进程是作为拥有资源的基本单位。
2. 并发性：不仅进程之间可以并发执行，同属一个进程的多个线程之间也可以并发执行。
3. 拥有资源：进程是拥有资源的的一个独立单位；线程不拥有系统资源，但可以访问隶属进程的资源。
4. 系统开销：在创建或撤销进程时，由于系统都要为之分配和回收资源，导致系统的开销明显大于创建或撤销线程时的开销。

## 4、进程与线程的关系

1. 一个线程只能属于一个进程，而一个进程可以拥有多个线程，并至少拥有一个线程。
2. 资源分配给进程，同一进程的所有线程共享该进程的所有资源。
3. 处理器分给线程，即真正在处理器上运行的是线程。

## 5、进程间的通信方式

1. **管道（pie） & 有名管道（named pipe）**：管道可用于具有亲缘关系的父子进程间的通信；*有名管道*除了具有管道所具有的功能外，还允许无亲缘关系进程间的通信。
2. **信号（Signal）**：信号是在软件层次上对中断机制的一种模拟，它是比较复杂的通信方式，用于通知进程有某事件发生，一个进程收到一个信号与处理器收到一个中断请求效果上可以说是一致的。
3. **消息队列（message queue）**：消息队列是消息的链接表，通过向消息队列发送消息，和从消息队列中接收消息的方式可以实现进程间的通信。
4. **共享内存（shared memory）**：可以说这是进程间最有用的通信方式。它使得多个进程可以访问同一块内存空间，不同进程可以及时看到对方进程对共享内存中数据的更新。这种方式需要依靠同步操作，如互斥锁和信号量等。
5. **信号量（semaphore）**：主要作为进程之间以及同一进程的不同线程之间的同步和互斥手段。
6. **套接字（socket）**：即通过IO网络通信。主要用于网络中位于不同机器上的进程间的通信。

## 6、线程间的通信方式

1. **管道（pie）** ：使用`java.io.PipedInputStream`和`java.io.PipedOutputStream`进行通信。
2. **信号（Signal）**：`wait`/`notify`机制。
3. **消息队列（message queue）**：例如基于生产者，消费者的消息队列。
4. **共享内存（shared memory）**：`volatile`关键字（while轮询）。
5. **信号量（semaphore）**：`synchronized`关键字。
6. **套接字（socket）**：多个线程（属于同一进程）可以通过网络通信，虽然有点多此一举，但是它确实是可以通信的。



